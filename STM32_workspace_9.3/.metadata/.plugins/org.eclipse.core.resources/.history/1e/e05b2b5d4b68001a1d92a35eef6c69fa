#include<stdio.h>
#include<string.h>	//strlen
#include<sys/socket.h>
#include<arpa/inet.h>	//inet_addr
#include"debug.h"
#include<errno.h> //errno
#include<unistd.h>
#include "client.h"

int main(int argc , char *argv[]){
	int is_connect;
	char *message;
	int is_send;
	debug_setlevel(3);


	while (1){
		message = "Hello world !\n";
		is_connect = connect_to_remote_server();
		//connexion OK
		int error_send_message;
		is_send = send(is_connect , message , strlen(message) , 0);
		if( is_send < 0)
		{
			error_send_message = errno;
			error_printf("Send failed // Num error : [%i] // Message_error : [%s]\n", error_send_message,strerror(error_send_message));
			is_connect = connect_to_remote_server();
		}
		else{
			debug_printf(3, "Data Send\n");
		}
		sleep(2);
	}
	return 0;
}
